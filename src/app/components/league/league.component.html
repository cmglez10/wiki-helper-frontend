<div class="CgiLeague-container">
  <div class="CgiLeague-searchContainer">
    <cgi-search (cgiSearch)="getLeague($event)"></cgi-search>
  </div>

  @if (loading()) {
    <div class="CgiLeague-loading">
      <mat-spinner diameter="100"></mat-spinner>
    </div>
  }

  <div class="CgiLeague-results">
    @if (wikiCode().length) {
      <div class="CgiLeague-code">
        <mat-checkbox class="CgiLeague-checkbox" [formControl]="showCompleteTable"> Tabla completa </mat-checkbox>
        <mat-form-field class="CgiLeague-field">
          <mat-label>Wiki code</mat-label>
          <textarea
            [value]="wikiCode()"
            cdkTextareaAutosize
            [cdkAutosizeMaxRows]="10"
            class="CgiLeague-codeInput"
            matInput
            readonly
          ></textarea>
        </mat-form-field>
      </div>
    }
    @if (league().length) {
      <div class="CgiLeague-table">
        <table mat-table [dataSource]="league()">
          <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef>Pos.</th>
            <td mat-cell *matCellDef="let team">{{ team.position }}</td>
          </ng-container>

          <ng-container matColumnDef="shield">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let team"><img [src]="team.shield" /></td>
          </ng-container>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Name</th>
            <td mat-cell *matCellDef="let team">{{ team.name }}</td>
          </ng-container>

          <ng-container matColumnDef="played">
            <th mat-header-cell *matHeaderCellDef>J</th>
            <td mat-cell *matCellDef="let team">{{ team.played }}</td>
          </ng-container>

          <ng-container matColumnDef="won">
            <th mat-header-cell *matHeaderCellDef>G</th>
            <td mat-cell *matCellDef="let team">{{ team.won }}</td>
          </ng-container>

          <ng-container matColumnDef="drawn">
            <th mat-header-cell *matHeaderCellDef>E</th>
            <td mat-cell *matCellDef="let team">{{ team.drawn }}</td>
          </ng-container>

          <ng-container matColumnDef="lost">
            <th mat-header-cell *matHeaderCellDef>P</th>
            <td mat-cell *matCellDef="let team">{{ team.lost }}</td>
          </ng-container>

          <ng-container matColumnDef="gf">
            <th mat-header-cell *matHeaderCellDef>GF</th>
            <td mat-cell *matCellDef="let team">{{ team.gf }}</td>
          </ng-container>

          <ng-container matColumnDef="ga">
            <th mat-header-cell *matHeaderCellDef>GC</th>
            <td mat-cell *matCellDef="let team">{{ team.ga }}</td>
          </ng-container>

          <ng-container matColumnDef="gd">
            <th mat-header-cell *matHeaderCellDef>Dif.</th>
            <td mat-cell *matCellDef="let team">{{ team.gd }}</td>
          </ng-container>

          <ng-container matColumnDef="sanction">
            <th mat-header-cell *matHeaderCellDef>S</th>
            <td mat-cell *matCellDef="let team">{{ team.sanction }}</td>
          </ng-container>

          <ng-container matColumnDef="points">
            <th mat-header-cell *matHeaderCellDef>Pts</th>
            <td mat-cell *matCellDef="let team">
              <strong>{{ team.points }}</strong>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
    }
  </div>
</div>
